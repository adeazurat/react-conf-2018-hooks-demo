import { Image, Notes, Head } from "mdx-deck";
import { CodeSurferColumns, Step } from "code-surfer";
import {
  vsDark as classTheme,
  nightOwl as hooksTheme,
} from "@code-surfer/themes";

import GreetingLoader from "./src/greeting-loader";
import onemorething from "./onemorething.jpg";

export const theme = classTheme;

<Head>
  <title>React Hooks Intro</title>
</Head>

This is a copy of [Dan's hooks demo](https://youtu.be/dpw9EHDh2bM?t=1051) from React Conf

Originally built by [Rodrigo Pombo](https://github.com/pomber/react-conf-2018-hooks-demo) to test [Code Surfer v3](https://codesurfer.pomb.us/)

---

Re-published and translated to Bahasa Indonesia with minor modification by Ade Azurat for Functional Programming Class in Fasilkom UI
[funpro-reacthook.netlify.com](https://funpro-reacthook.netlify.com/)

---

<CodeSurferColumns sizes={[1, 2]}>
  
<Step subtitle="Ini sebuah Komponen React sederhana">
  
<GreetingLoader />

```jsx file=./src/greeting.1.1.js
```

</Step>

<Step subtitle="Kita ingin membuat 'name' dapat diedit">
    
<GreetingLoader />

```jsx 7 file=./src/greeting.1.1.js
```

</Step>
  
<Step subtitle="maka, kita menjadikannya sebagai class">
    
<GreetingLoader version="class.1.1" />

```jsx file=./src/greeting.class.1.1.js
```

</Step>

<Step subtitle="menambahkan state">

<GreetingLoader version="class.1.2" />

```jsx file=./src/greeting.class.1.2.js
```

</Step>

<Step subtitle="dan menambahkan sebuah handler perubahan yang memanggil setState">

<GreetingLoader version="class.1.3" />

```jsx 10:12,15:17,25 file=./src/greeting.class.1.3.js
```

</Step>

<Step subtitle="sekarang sudah berhasil dan kita bisa mengedit 'name'">

<GreetingLoader version="class.1.3" />

```jsx 1:31 file=./src/greeting.class.1.3.js
```

</Step>

</CodeSurferColumns>

---

Namun mari kita observasi dan lihat kembali!

---

<CodeSurferColumns
  sizes={[1, 2]}
  themes={[hooksTheme, hooksTheme]}
>

<Step subtitle="bagaimana bila kita tidak harus membuat class untuk memanfaatkan state?">

<GreetingLoader theme={hooksTheme} />

```jsx file=./src/greeting.1.1.js
```

</Step>

<Step subtitle="kita ini menampilkan (render) form input dengan 'name' sebagai value ">

<GreetingLoader theme={hooksTheme} />

```jsx 5,10 file=./src/greeting.hooks.1.1.js
```

</Step>

<Step subtitle="kita belum tahu dari mana value 'name' didapati, kita akan lengkapi nanti">

<GreetingLoader theme={hooksTheme} />

```jsx 5 file=./src/greeting.hooks.1.1.js
```

</Step>

<Step subtitle="kita juga harus dapat mengupdate 'name' ketika input berubah">

<GreetingLoader theme={hooksTheme} />

```jsx 6,8:10,15[29:55] file=./src/greeting.hooks.1.2.js
```

</Step>

<Step subtitle="'name' dan 'setName' cukup berhubungan, mari kita kumpulkan">

<GreetingLoader theme={hooksTheme} />

```jsx 5:6 file=./src/greeting.hooks.1.2.js
```

</Step>

<Step subtitle="dari mana kita mendapati 'name' dan 'setName'?">

<GreetingLoader theme={hooksTheme} />

```jsx  file=./src/greeting.hooks.1.3.js
```

</Step>

<Step subtitle="bagaimana jika kita dapat memanfaatkan  **use** state dari React?">

<GreetingLoader version="hooks.1.4" theme={hooksTheme} />

```jsx 1[15:40],5 file=./src/greeting.hooks.1.4.js
```

</Step>

</CodeSurferColumns>

---

<CodeSurferColumns themes={[classTheme, hooksTheme]}>

<Step>

```jsx file=./src/greeting.class.1.3.js title="Sebelum" subtitle="Sebuah class component dengan state"
```

```jsx file=./src/greeting.hooks.1.4.js title="Sesudah" subtitle="Sebuah function component dengan state"
```

</Step>

<Step>

```jsx 7:9 file=./src/greeting.class.1.3.js title="Sebelum" subtitle="state harus berupa object"
```

```jsx 5 file=./src/greeting.hooks.1.4.js title="Sesudah" subtitle="state bisa apa saja"
```

</Step>

<Step>

```jsx 7:12,16,24 file=./src/greeting.class.1.3.js title="Sebelum" subtitle="baca dan update state dengan this.state dan this.setState"
```

```jsx 5,8,14[16:27] file=./src/greeting.hooks.1.4.js title="Sesudah" subtitle="the state dan the setter hanyalah variables dalam function"
```

</Step>

<Step subtitle="Apakah useState sebenarnya? useState adalah hook, sebuah function dari React yang mengizinkan kita terhubung dengan React features dari function components">

```jsx 1[100],31[100] file=./src/greeting.class.1.3.js title="Sebelum"
```

```jsx 1[1:7,15:40],5 file=./src/greeting.hooks.1.4.js title="Sesudah"
```

</Step>

</CodeSurferColumns>

---

<CodeSurferColumns sizes={[1, 2]}>

<Step subtitle="Sekarang kita ingin menambahkan field kedua untuk surname">

<GreetingLoader version="class.1.3" />

```jsx file=./src/greeting.class.1.3.js
```

</Step>

<Step subtitle="maka kita tambahkan ket ke state dan mereplikasi kerangka codenya">

<GreetingLoader version="class.2.1" />

```jsx file=./src/greeting.class.2.1.js
```

</Step>

</CodeSurferColumns>

---

<CodeSurferColumns
  sizes={[1, 2]}
  themes={[classTheme, hooksTheme]}
>

<Step subtitle="Mari lakukan lagi dengan hooks">

<GreetingLoader version="hooks.1.4" theme={hooksTheme} />

```jsx file=./src/greeting.hooks.1.4.js
```

</Step>

<Step subtitle="kita sudah mendeklarasikan state kedua untuk surname dan menampilkannya">

<GreetingLoader version="hooks.2.1" theme={hooksTheme} />

```jsx file=./src/greeting.hooks.2.1.js
```

</Step>

</CodeSurferColumns>

---

<CodeSurferColumns sizes={[1, 2]}>

<Step subtitle="Mari membaca data dari 'context'">

<GreetingLoader version="class.2.1" />

```jsx file=./src/greeting.class.2.1.js
```

</Step>

<Step subtitle="pertama kita import context dari sebuah berkas">

<GreetingLoader version="class.3.1" />

```jsx file=./src/greeting.class.3.1.js
```

</Step>

<Step subtitle="kita dapatkan theme dari context render prop API">

<GreetingLoader version="class.3.2" />

```jsx 30,31,32[20:37],46,47 file=./src/greeting.class.3.2.js
```

</Step>

<Step subtitle="dan kita lakukan yang sama untuk locale">

<GreetingLoader version="class.3.3" />

```jsx file=./src/greeting.class.3.3.js
```

</Step>

</CodeSurferColumns>

---

<CodeSurferColumns
  sizes={[1, 2]}
  themes={[classTheme, hooksTheme]}
>

<Step subtitle="Apakah kita bisa lakukan yang sama atau lebih dengan hooks?">

<GreetingLoader version="hooks.2.1" theme={hooksTheme} />

```jsx file=./src/greeting.hooks.2.1.js
```

</Step>

<Step subtitle="kita import useContext dari React">

<GreetingLoader version="hooks.3.1" theme={hooksTheme} />

```jsx 1[27:37,40:52],3 file=./src/greeting.hooks.3.1.js
```

</Step>

<Step subtitle="kita bisa mengambil theme dan memonitor perubahannya menggunakan hook">

<GreetingLoader version="hooks.3.2" theme={hooksTheme} />

```jsx 8,19[14:30] file=./src/greeting.hooks.3.2.js
```

</Step>

<Step subtitle="">

<GreetingLoader version="hooks.3.3" theme={hooksTheme} />

```jsx file=./src/greeting.hooks.3.3.js
```

</Step>

</CodeSurferColumns>

---

<CodeSurferColumns themes={[classTheme, hooksTheme]}>

<Step subtitle="Dengan context, kita terhindar dari membungkus (wrapper) render prop. Kode lebih bersih.">

```jsx 30,31,45,46,48,49,51,52 file=./src/greeting.class.3.3.js title="Sebelum"
```

```jsx 8,9 file=./src/greeting.hooks.3.3.js title="Sesudah"
```

</Step>

</CodeSurferColumns>

---

<CodeSurferColumns sizes={[1, 2]}>

<Step subtitle="Mari ubah document title menggunakan lifecycle methods">

<GreetingLoader version="class.3.3" />

```jsx file=./src/greeting.class.3.3.js
```

</Step>

<Step subtitle="kita perlu mengimplementasi componentDidMount dan componentDidUpdate">

<GreetingLoader version="class.4.1" />

```jsx file=./src/greeting.class.4.1.js
```

</Step>

</CodeSurferColumns>

---

<CodeSurferColumns
  sizes={[1, 2]}
  themes={[classTheme, hooksTheme]}
>

<Step subtitle="Bagaimana melakukannya dengan hooks?">

<GreetingLoader version="hooks.3.3" theme={hooksTheme} />

```jsx file=./src/greeting.hooks.3.3.js
```

</Step>

<Step subtitle="kita manfaatkan useEffect hook">

<GreetingLoader version="hooks.4.1" theme={hooksTheme} />

```jsx 1,4,5 file=./src/greeting.hooks.4.1.js
```

</Step>

<Step subtitle="kita berikan sebuah function yang dijalakan setiap update dan awal render">

<GreetingLoader version="hooks.4.2" theme={hooksTheme} />

```jsx file=./src/greeting.hooks.4.2.js
```

</Step>

</CodeSurferColumns>

---

<CodeSurferColumns themes={[classTheme, hooksTheme]}>

<Step>

```jsx 20:28 file=./src/greeting.class.4.1.js title="Sebelum" subtitle="Perlu duplikasi lifecycle methods untuk mount dan update"
```

```jsx 15:17 file=./src/greeting.hooks.4.2.js title="Sesudah"
```

</Step>

<Step>

```jsx 20:28 file=./src/greeting.class.4.1.js title="Sebelum" subtitle="menggunakan this.state untuk mengakses state"
```

```jsx 15:17 file=./src/greeting.hooks.4.2.js title="Sesudah" subtitle="effect berada dalam function component, jadi kita bisa menggunakan variables dalam function component"
```

</Step>

</CodeSurferColumns>

---

<CodeSurferColumns sizes={[1, 2]}>

<Step subtitle="Sekarang kita ingin memonitor ukuran window saat resize">

<GreetingLoader version="class.4.1" />

```jsx file=./src/greeting.class.4.1.js
```

</Step>

<Step subtitle="kita tambahkan ukuran lebar window pada state">

<GreetingLoader version="class.5.1" />

```jsx file=./src/greeting.class.5.1.js
```

</Step>

<Step subtitle="tambah row label untuk menampilkannya">

<GreetingLoader version="class.5.2" />

```jsx file=./src/greeting.class.5.2.js
```

</Step>

<Step subtitle="tambahkan listener saat componentDidMount">

<GreetingLoader version="class.5.3" />

```jsx file=./src/greeting.class.5.3.js
```

</Step>

<Step subtitle="dan menghapus listener sebelum componentWillUnmount">

<GreetingLoader version="class.5.4" />

```jsx file=./src/greeting.class.5.4.js
```

</Step>

</CodeSurferColumns>

---

<CodeSurferColumns
  sizes={[1, 2]}
  themes={[classTheme, hooksTheme]}
>

<Step subtitle="Mari perhatikan cara melakukannya dengan hooks">

<GreetingLoader version="hooks.4.2" theme={hooksTheme} />

```jsx file=./src/greeting.hooks.4.2.js
```

</Step>

<Step subtitle="pertama kita gunakan sebuah state baru untuk width">

<GreetingLoader version="hooks.5.1" theme={hooksTheme} />

```jsx file=./src/greeting.hooks.5.1.js
```

</Step>

<Step subtitle="kemudian gunakan effect kedua untuk handle resize">

<GreetingLoader version="hooks.5.2" theme={hooksTheme} />

```jsx file=./src/greeting.hooks.5.2.js
```

</Step>

<Step subtitle="kita siapkan fungsi untuk memhapusnya ditempat yang sama dengan cara mereturn fungsi tersebut">

<GreetingLoader version="hooks.5.3" theme={hooksTheme} />

```jsx 20,23:26 file=./src/greeting.hooks.5.3.js
```

</Step>

</CodeSurferColumns>

---

<CodeSurferColumns themes={[classTheme, hooksTheme]}>

<Step>

```jsx 22:35 file=./src/greeting.class.5.4.js title="Sebelum" subtitle="logika dari effect yang berbeda jadi bercampur dan terpisahkan pada method yang berbeda"
```

```jsx 15:17,20:26 file=./src/greeting.hooks.5.3.js title="Sesudah" subtitle="Kode dipisahkan sesuai dengan kebutuhan bisnisnya, bukan karena waktu dieksekusi. Separation of Concern!"
```

</Step>

</CodeSurferColumns>

---

<Image src={onemorething} />

---

<CodeSurferColumns
  sizes={[1, 2]}
  themes={[classTheme, hooksTheme]}
>

<Step subtitle="function ini menjadi makin panjang">

<GreetingLoader version="hooks.5.3" theme={hooksTheme} />

```jsx 1:51 file=./src/greeting.hooks.5.3.js
```

</Step>

<Step subtitle="hook calls hanyalah pemanggilan function">

<GreetingLoader version="hooks.5.3" theme={hooksTheme} />

```jsx 19:26 file=./src/greeting.hooks.5.3.js
```

</Step>

<Step subtitle="maka kita bisa ekstraksikan keluar">

<GreetingLoader version="hooks.6.1" theme={hooksTheme} />

```jsx file=./src/greeting.hooks.6.1.js
```

</Step>

<Step subtitle="">

<GreetingLoader version="hooks.6.2" theme={hooksTheme} />

```jsx file=./src/greeting.hooks.6.2.js
```

</Step>

<Step subtitle="kita bisa juga kurang duplikasi dengan modularitas fungsi generik">

<GreetingLoader version="hooks.6.2" theme={hooksTheme} />

```jsx 10,11,17:23,28,31:34 file=./src/greeting.hooks.6.2.js
```

</Step>

<Step subtitle="">

<GreetingLoader version="hooks.6.3" theme={hooksTheme} />

```jsx 10,11,20,23,31:40 file=./src/greeting.hooks.6.3.js
```

</Step>

</CodeSurferColumns>

---

<CodeSurferColumns themes={[classTheme, hooksTheme]}>

<Step>

```jsx 5:77 file=./src/greeting.class.5.4.js
```

```jsx 9:58 file=./src/greeting.hooks.6.3.js
```

</Step>

</CodeSurferColumns>

---
References for Functional Programming Class Fasilkom UI:

[Dan Abramov's talk about React Hook at React Conf 2018](https://youtu.be/dpw9EHDh2bM)

[Interactive Tutorial of React Hook](https://www.telerik.com/kendo-react-ui/react-hooks-guide/#toc-what-we-will-learn)

Original Closing by Rodrigo Pombo:

[Code Surfer Docs](https://codesurfer.pomb.us/)
